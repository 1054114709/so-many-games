require=function t(e,o,i){function r(s,n){if(!o[s]){if(!e[s]){var a="function"==typeof require&&require;if(!n&&a)return a(s,!0);if(c)return c(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var p=o[s]={exports:{}};e[s][0].call(p.exports,function(t){var o=e[s][1][t];return r(o||t)},p,p.exports,t,e,o,i)}return o[s].exports}for(var c="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({GameRoot:[function(t,e,o){"use strict";cc._RF.push(e,"a370bXtLwVLZ7lyzdETAio/","GameRoot"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskPanel=null,e.messageLabel=null,e.messageBtn1=null,e.messageBtn2=null,e.tipPanel=null,e.tipLabel=null,e}return __extends(e,t),e.prototype.showMaskMessage=function(t,e,o){var i=this;this.messageLabel.string=t,this.maskPanel.active||(this.maskPanel.active=!0),e?(this.messageBtn1.active=!0,this.messageBtn1.getComponent(cc.Label).string=e.label,this.messageBtn1.once(cc.Node.EventType.TOUCH_END,function(){i.hideMaskMessage(),e.cb&&e.cb()},e.target)):this.messageBtn1.active=!1,o?(this.messageBtn2.active=!0,this.messageBtn2.getComponent(cc.Label).string=o.label,this.messageBtn2.once(cc.Node.EventType.TOUCH_END,function(){i.hideMaskMessage(),o.cb&&o.cb()},o.target)):this.messageBtn2.active=!1},e.prototype.hideMaskMessage=function(){this.maskPanel.active=!1},e.prototype.showTip=function(t){this.tipLabel.string=t,this.tipPanel.getComponent(cc.Animation).play()},__decorate([c(cc.Node)],e.prototype,"maskPanel",void 0),__decorate([c(cc.Label)],e.prototype,"messageLabel",void 0),__decorate([c(cc.Node)],e.prototype,"messageBtn1",void 0),__decorate([c(cc.Node)],e.prototype,"messageBtn2",void 0),__decorate([c(cc.Node)],e.prototype,"tipPanel",void 0),__decorate([c(cc.Label)],e.prototype,"tipLabel",void 0),e=__decorate([r],e)}(cc.Component);o.GameRoot=s,cc._RF.pop()},{}],Get47Board:[function(t,e,o){"use strict";cc._RF.push(e,"4e746t6FElNd7L0fGocCm7k","Get47Board"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Get47Piece"),r=t("./Get47Constants"),c=cc._decorator,s=c.ccclass,n=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colsNum=7,e.rowsNum=7,e.padding=5,e.spacing=5,e.piecePrefab=null,e.get47Scene=null,e.runningAction=!1,e.score=0,e.inputDir=0,e}return __extends(e,t),e.prototype.init=function(t){this.get47Scene=t,this.pieceWidth=(this.node.width-2*this.padding-this.spacing*(this.colsNum-1))/this.colsNum},e.prototype.reset=function(){this.node.removeAllChildren(),this.pieceMap=[];for(var t=0;t<this.colsNum;t++){this.pieceMap[t]=[];for(var e=0;e<this.rowsNum;e++){var o=cc.instantiate(this.piecePrefab);this.node.addChild(o),o.width=this.pieceWidth,o.height=this.pieceWidth,o.position=cc.p(this.padding+t*(this.pieceWidth+this.spacing),this.padding+e*(this.pieceWidth+this.spacing));var r=o.getComponent(i.Piece);r.init(t,e),this.addTouchEvent(r),this.pieceMap[t][e]=r}}this.deletePieces()},e.prototype.addTouchEvent=function(t){var e=this,o=function(o){if(!e.runningAction){var i,c=o.getStartLocation(),s=o.getLocation();i=Math.abs(s.x-c.x)>Math.abs(s.y-c.y)?s.x>c.x?r.DIR.RIGHT:r.DIR.LEFT:s.y>c.y?r.DIR.UP:r.DIR.DOWN,e.inputDir=0,e.get47Scene.onPieceTouch(t,i)}};t.node.on(cc.Node.EventType.TOUCH_END,o,this),t.node.on(cc.Node.EventType.TOUCH_CANCEL,o,this)},e.prototype.tryExchange=function(t,e){var o=this,i=this.getNeighborPiece(t,e);if(null!==i){this.runningAction=!0,this.exchangeTwoPiecesState(t,i);var r=this.getHorizontalLines(),c=this.getVerticalLines();if(r.length+c.length>0){this.exchangeTwoPiecesPosIndex(t,i);var s=0,n=cc.sequence(cc.moveTo(.15,t.posIndex),cc.callFunc(function(){2===++s&&(o.runningAction=!1,o.deletePieces())})),a=cc.sequence(cc.moveTo(.15,i.posIndex),cc.callFunc(function(){2===++s&&(o.runningAction=!1,o.deletePieces())}));t.node.runAction(n),i.node.runAction(a)}else{this.exchangeTwoPiecesState(t,i);var h=0,p=t.node.position,u=i.node.position,n=cc.sequence(cc.moveTo(.1,u),cc.moveTo(.1,p),cc.callFunc(function(){2===++h&&(o.runningAction=!1)})),a=cc.sequence(cc.moveTo(.1,p),cc.moveTo(.1,u),cc.callFunc(function(){2===++h&&(o.runningAction=!1)}));t.node.runAction(n),i.node.runAction(a)}}},e.prototype.exchangeTwoPiecesState=function(t,e){this.pieceMap[t.x][t.y]=e,this.pieceMap[e.x][e.y]=t,o=[e.x,t.x],t.x=o[0],e.x=o[1],i=[e.y,t.y],t.y=i[0],e.y=i[1];var o,i},e.prototype.exchangeTwoPiecesPosIndex=function(t,e){o=[e.posIndex,t.posIndex],t.posIndex=o[0],e.posIndex=o[1];var o},e.prototype.deletePieces=function(){var t=this;this.runningAction=!0;var e=this.getHorizontalLines(),o=this.getVerticalLines();if(e.length+o.length!==0){for(var i=0,r=0,c=[],s=0,n=e;s<n.length;s++){var a=n[s];i+=a.type,c.push(a)}for(var h=0,p=o;h<p.length;h++){var u=p[h];r+=u.type,-1===c.indexOf(u)&&c.push(u)}this.inputDir>0?this.get47Scene.updateScore(i+r):this.inputDir<0?this.get47Scene.updateScore(-i-r):this.get47Scene.updateScore(i-r);for(var l=0,d=c.length,f=0;f<d;f++){var v=cc.sequence(cc.scaleTo(.15,0,0),cc.callFunc(function(){++l===d&&(t.runningAction=!1,t.fallPieces())}));c[f].isAlive=!1,c[f].node.runAction(v)}}else this.runningAction=!1},e.prototype.fallPieces=function(){var t=this;this.runningAction=!0;for(var e=!1;!e;){e=!0;for(r=1;r<this.rowsNum;r++)for(i=0;i<this.colsNum;i++)this.pieceMap[i][r].isAlive&&!this.pieceMap[i][r-1].isAlive&&(this.exchangeTwoPiecesState(this.pieceMap[i][r],this.pieceMap[i][r-1]),this.exchangeTwoPiecesPosIndex(this.pieceMap[i][r],this.pieceMap[i][r-1]),e=!1)}for(var o=[],i=0;i<this.colsNum;i++)for(var r=0;r<this.rowsNum;r++)this.pieceMap[i][r].posIndex!==this.pieceMap[i][r].node.position&&o.push(this.pieceMap[i][r]);for(var c=0,s=o.length,n=0;n<s;n++){var a=cc.sequence(cc.moveTo(.3,o[n].posIndex),cc.callFunc(function(){++c==s&&(t.runningAction=!1,t.addPieces())}));o[n].node.runAction(a)}},e.prototype.addPieces=function(){var t=this;this.runningAction=!0;for(var e=[],o=0;o<this.rowsNum;o++)for(var i=0;i<this.colsNum;i++)this.pieceMap[i][o].isAlive||e.push(this.pieceMap[i][o]);for(var r=0,c=e.length,s=0;s<c;s++){var n=cc.sequence(cc.scaleTo(.15,1,1),cc.callFunc(function(){++r==c&&(t.runningAction=!1,t.deletePieces())}));e[s].randomType(),e[s].isAlive=!0,e[s].node.runAction(n)}},e.prototype.getVerticalLines=function(){for(var t=[],e=1,o=0;o<this.colsNum;o++)for(var i=0;i<this.rowsNum-2;i+=e){var r=this.pieceMap[o][i];e=1;for(var c=i+1;c<this.rowsNum&&this.pieceMap[o][c].type===r.type;c++)e++;if(e>=3)for(var s=0;s<e;s++)t.push(this.pieceMap[o][i+s])}return t},e.prototype.getHorizontalLines=function(){for(var t=[],e=1,o=0;o<this.rowsNum;o++)for(var i=0;i<this.colsNum-2;i+=e){var r=this.pieceMap[i][o].type;e=1;for(var c=i+1;c<this.colsNum&&this.pieceMap[c][o].type===r;c++)e++;if(e>=3)for(var s=0;s<e;s++)t.push(this.pieceMap[i+s][o])}return t},e.prototype.getNeighborPiece=function(t,e){var o=t.x,i=t.y;switch(e){case r.DIR.LEFT:if(o>0)return this.pieceMap[o-1][i];break;case r.DIR.RIGHT:if(o<this.colsNum-1)return this.pieceMap[o+1][i];break;case r.DIR.UP:if(i<this.rowsNum-1)return this.pieceMap[o][i+1];break;case r.DIR.DOWN:if(i>0)return this.pieceMap[o][i-1]}return null},e.prototype.newView=function(t){var e=this;if(void 0===t&&(t=0),this.inputDir=t,!this.runningAction){this.runningAction=!0;for(var o=0,i=0;i<this.colsNum;i++)for(var r=0;r<this.rowsNum;r++){var c=cc.sequence(cc.scaleTo(.3,0,0),cc.callFunc(function(){++o===(e.colsNum-1)*(e.rowsNum-1)&&(e.runningAction=!1,e.addPieces())}));this.pieceMap[i][r].isAlive=!1,this.pieceMap[i][r].node.runAction(c)}}},__decorate([n(cc.Integer)],e.prototype,"colsNum",void 0),__decorate([n(cc.Integer)],e.prototype,"rowsNum",void 0),__decorate([n(cc.Integer)],e.prototype,"padding",void 0),__decorate([n(cc.Integer)],e.prototype,"spacing",void 0),__decorate([n(cc.Prefab)],e.prototype,"piecePrefab",void 0),e=__decorate([s],e)}(cc.Component);o.Get47Board=a,cc._RF.pop()},{"./Get47Constants":"Get47Constants","./Get47Piece":"Get47Piece"}],Get47Constants:[function(t,e,o){"use strict";cc._RF.push(e,"13fe4mwiuZGjaCf2paO8sE7","Get47Constants"),Object.defineProperty(o,"__esModule",{value:!0});!function(t){t[t.LEFT=1]="LEFT",t[t.UP=2]="UP",t[t.RIGHT=3]="RIGHT",t[t.DOWN=4]="DOWN"}(o.DIR||(o.DIR={}));!function(t){t[t.NONE=0]="NONE",t[t.START=1]="START",t[t.OVER=2]="OVER"}(o.STATE||(o.STATE={})),cc._RF.pop()},{}],Get47Piece:[function(t,e,o){"use strict";cc._RF.push(e,"fc55f3NtT5G+KpukC6ZPkmK","Get47Piece"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pics=[],e.sprite=null,e.x=0,e.y=0,e.posIndex=cc.v2(),e.isAlive=!0,e._n=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._n},set:function(t){this._n=t,this.sprite.spriteFrame=this.pics[t-1]},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){this.x=t,this.y=e,this.posIndex=this.node.position,this.randomType(),this.isAlive=!0},e.prototype.randomType=function(){this.type=Math.floor(Math.random()*this.pics.length)+1},__decorate([c([cc.SpriteFrame])],e.prototype,"pics",void 0),__decorate([c(cc.Sprite)],e.prototype,"sprite",void 0),e=__decorate([r],e)}(cc.Component);o.Piece=s,cc._RF.pop()},{}],Get47Scene:[function(t,e,o){"use strict";cc._RF.push(e,"bff9a8PUMtCz7ZHZp5ezQ9T","Get47Scene"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Get47Board"),r=t("./Get47Constants"),c=t("../G"),s=t("./Get47Score"),n=cc._decorator,a=n.ccclass,h=n.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.score=null,e.target=47,e.state=r.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.board.init(this),this.startGame(),this.addListeners()},e.prototype.startGame=function(){this.state=r.STATE.START,this.board.reset(),this.score.reset(0)},e.prototype.overGame=function(){this.state=r.STATE.OVER,c.G.gameRoot.showMaskMessage("666",{label:"233",cb:function(){},target:this})},e.prototype.updateScore=function(t){this.state===r.STATE.START&&(t>0?this.score.add(t):t<0&&this.score.minus(-t),this.score.num===this.target&&this.overGame())},e.prototype.onPieceTouch=function(t,e){this.state===r.STATE.START&&this.board.tryExchange(t,e)},e.prototype.onBtnReturn=function(){c.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.addListeners=function(){cc.inputManager.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},e.prototype.removeListeners=function(){cc.inputManager.setAccelerometerEnabled(!1)},e.prototype.onDeviceMotionEvent=function(t){Math.abs(t.acc.x)>.3&&Math.abs(t.acc.y)>.3&&this.board.newView()},__decorate([h(i.Get47Board)],e.prototype,"board",void 0),__decorate([h(s.Score)],e.prototype,"score",void 0),__decorate([h(cc.Integer)],e.prototype,"target",void 0),e=__decorate([a],e)}(cc.Component);o.Get47Scene=p,cc._RF.pop()},{"../G":"G","./Get47Board":"Get47Board","./Get47Constants":"Get47Constants","./Get47Score":"Get47Score"}],Get47Score:[function(t,e,o){"use strict";cc._RF.push(e,"51bd5D4aHJO/be6iKwDn88G","Get47Score"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreLabel=null,e.addLabel=null,e.minusLabel=null,e.anim=null,e.num=0,e}return __extends(e,t),e.prototype.reset=function(t){this.num=t,this.scoreLabel.string=t+""},e.prototype.add=function(t){this.num+=t,this.scoreLabel.string=this.num+"",this.addLabel.string="+"+t,this.anim.play("add")},e.prototype.minus=function(t){this.num-=t,this.scoreLabel.string=this.num+"",this.minusLabel.string="-"+t,this.anim.play("minus")},__decorate([c(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([c(cc.Label)],e.prototype,"addLabel",void 0),__decorate([c(cc.Label)],e.prototype,"minusLabel",void 0),__decorate([c(cc.Animation)],e.prototype,"anim",void 0),e=__decorate([r],e)}(cc.Component);o.Score=s,cc._RF.pop()},{}],GobangAI:[function(t,e,o){"use strict";cc._RF.push(e,"718e4R2i4ZJIo5PjMMgEagd","GobangAI"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./GobangConstants"),r=function(){function t(t){this.board=t,this.fiveGroup=[],this.fiveGroupScore=[];for(i=0;i<15;i++)for(e=0;e<11;e++)this.fiveGroup.push([cc.v2(e,i),cc.v2(e+1,i),cc.v2(e+2,i),cc.v2(e+3,i),cc.v2(e+4,i)]);for(e=0;e<15;e++)for(i=0;i<11;i++)this.fiveGroup.push([cc.v2(e,i),cc.v2(e,i+1),cc.v2(e,i+2),cc.v2(e,i+3),cc.v2(e,i+4)]);for(o=-10;o<=10;o++)for(var e=0;e<11;e++)o+e<0||o+e>10||this.fiveGroup.push([cc.v2(e,o+e),cc.v2(e+1,o+e+1),cc.v2(e+2,o+e+2),cc.v2(e+3,o+e+3),cc.v2(e+4,o+e+4)]);for(var o=4;o<=24;o++)for(var i=0;i<11;i++)o-i<4||o-i>14||this.fiveGroup.push([cc.v2(o-i,i),cc.v2(o-i-1,i+1),cc.v2(o-i-2,i+2),cc.v2(o-i-3,i+3),cc.v2(o-i-4,i+4)])}return t.prototype.getNextCoor=function(){this.board.pieceMap;for(s=0;s<this.fiveGroup.length;s++){for(var t=0,e=0,o=0;o<5;o++)this.board.getPieceByCoor(this.fiveGroup[s][o]).color===i.BLACK?t++:this.board.getPieceByCoor(this.fiveGroup[s][o]).color===i.WHITE&&e++;t+e==0?this.fiveGroupScore[s]=7:t>0&&e>0?this.fiveGroupScore[s]=0:0==t&&1==e?this.fiveGroupScore[s]=35:0==t&&2==e?this.fiveGroupScore[s]=800:0==t&&3==e?this.fiveGroupScore[s]=15e3:0==t&&4==e?this.fiveGroupScore[s]=8e5:0==e&&1==t?this.fiveGroupScore[s]=15:0==e&&2==t?this.fiveGroupScore[s]=400:0==e&&3==t?this.fiveGroupScore[s]=1800:0==e&&4==t&&(this.fiveGroupScore[s]=1e5)}for(var r=0,c=0,s=0;s<this.fiveGroupScore.length;s++)this.fiveGroupScore[s]>r&&(r=this.fiveGroupScore[s],c=s);for(var n=!1,a=!1,h=0,s=0;s<5;s++)if(n||this.board.getPieceByCoor(this.fiveGroup[c][s]).color!==i.NONE||(h=s),a||this.board.getPieceByCoor(this.fiveGroup[c][s]).color===i.NONE||(n=!0,a=!0),a&&this.board.getPieceByCoor(this.fiveGroup[c][s]).color===i.NONE){h=s;break}return this.fiveGroup[c][h]},t}();o.GobangAI=r,cc._RF.pop()},{"./GobangConstants":"GobangConstants"}],GobangBoard:[function(t,e,o){"use strict";cc._RF.push(e,"0c537hphVJHQ529UlnH6eF9","GobangBoard"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./GobangConstants"),r=t("./GobangPiece"),c=cc._decorator,s=c.ccclass,n=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colsSum=15,e.rowsSum=15,e.graphics=null,e.graphics2=null,e.tileWidth=0,e.startX=0,e.startY=0,e.boardWidth=0,e.boardHeight=0,e.lastPiece=null,e.gobangScene=null,e}return __extends(e,t),e.prototype.init=function(t){this.gobangScene=t,this.tileWidth=this.node.width/this.colsSum,this.startX=this.tileWidth/2,this.startY=this.tileWidth/2,this.boardWidth=this.tileWidth*(this.colsSum-1),this.boardHeight=this.tileWidth*(this.rowsSum-1),this.reset(),this.addListeners()},e.prototype.reset=function(){this.graphics.clear(),this.graphics2.clear(),this.graphics.strokeColor=cc.Color.BLACK;for(c=0;c<this.colsSum;c++)this.graphics.moveTo(this.startX+c*this.tileWidth,this.startY),this.graphics.lineTo(this.startX+c*this.tileWidth,this.startY+this.boardHeight),this.graphics.stroke();for(o=0;o<this.rowsSum;o++)this.graphics.moveTo(this.startX,this.startY+o*this.tileWidth),this.graphics.lineTo(this.startX+this.boardWidth,this.startY+o*this.tileWidth),this.graphics.stroke();this.graphics.strokeColor=cc.Color.RED,this.graphics.fillColor=cc.Color.RED;var t=Math.floor(this.colsSum/2),e=Math.floor(this.rowsSum/2);this.graphics.circle(this.startX+t*this.tileWidth,this.startY+e*this.tileWidth,5),this.graphics.fill(),this.pieceMap=[];for(var o=0;o<this.rowsSum;o++){this.pieceMap[o]=[];for(var c=0;c<this.colsSum;c++)this.pieceMap[o][c]=new r.GobangPiece(c,o,i.NONE)}},e.prototype.drawLastPieceRect=function(){this.graphics2.clear(),this.lastPiece&&(this.graphics2.strokeColor=cc.Color.RED,this.graphics2.rect(this.startX+this.tileWidth*this.lastPiece.x-this.tileWidth/2,this.startY+this.tileWidth*this.lastPiece.y-this.tileWidth/2,this.tileWidth,this.tileWidth),this.graphics2.stroke())},e.prototype.placeBlack=function(t){this.graphics.strokeColor=cc.Color.BLACK,this.graphics.fillColor=cc.Color.BLACK,this.graphics.circle(this.startX+t.x*this.tileWidth,this.startY+t.y*this.tileWidth,.45*this.tileWidth),this.graphics.fill(),this.pieceMap[t.x][t.y]=new r.GobangPiece(t.x,t.y,i.BLACK),this.lastPiece=this.pieceMap[t.x][t.y],this.drawLastPieceRect()},e.prototype.placeWhite=function(t){this.graphics.strokeColor=cc.Color.WHITE,this.graphics.fillColor=cc.Color.WHITE,this.graphics.circle(this.startX+t.x*this.tileWidth,this.startY+t.y*this.tileWidth,.45*this.tileWidth),this.graphics.fill(),this.pieceMap[t.x][t.y]=new r.GobangPiece(t.x,t.y,i.WHITE),this.lastPiece=this.pieceMap[t.x][t.y],this.drawLastPieceRect()},e.prototype.getPieceByCoor=function(t){return this.pieceMap[t.x][t.y]},e.prototype.onTouched=function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),o=this.getCoorByPos(e);this.gobangScene.onBoardTouched(o)},e.prototype.getCoorByPos=function(t){var e=Math.round((t.x-this.startX)/this.tileWidth),o=Math.round((t.y-this.startY)/this.tileWidth);return cc.v2(e,o)},e.prototype.judgeWin=function(){for(var t=0,e=0;e<this.colsSum;e++)if(this.pieceMap[e][this.lastPiece.y].color===this.lastPiece.color){if(5==++t)return!0}else t=0;t=0;for(var o=0;o<this.rowsSum;o++)if(this.pieceMap[this.lastPiece.x][o].color===this.lastPiece.color){if(5==++t)return!0}else t=0;var i=this.lastPiece.y-this.lastPiece.x;t=0;for(e=0;e<this.colsSum;e++)if(!(i+e<0||i+e>=this.rowsSum))if(this.pieceMap[e][i+e].color===this.lastPiece.color){if(5==++t)return!0}else t=0;i=this.lastPiece.y+this.lastPiece.x,t=0;for(e=0;e<15;e++)if(!(i-e<0||i-e>=this.rowsSum))if(this.pieceMap[e][i-e].color===this.lastPiece.color){if(5==++t)return!0}else t=0;return!1},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},e.prototype.removeListeners=function(){},__decorate([n(cc.Integer)],e.prototype,"colsSum",void 0),__decorate([n(cc.Integer)],e.prototype,"rowsSum",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics2",void 0),e=__decorate([s],e)}(cc.Component);o.GobangBoard=a,cc._RF.pop()},{"./GobangConstants":"GobangConstants","./GobangPiece":"GobangPiece"}],GobangConstants:[function(t,e,o){"use strict";cc._RF.push(e,"4d1454ZxfBKuoBi2bCCS2eB","GobangConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.NONE=0,o.BLACK=1,o.WHITE=2,cc._RF.pop()},{}],GobangPiece:[function(t,e,o){"use strict";cc._RF.push(e,"b1aa3dPul9JxbYweTzmBe9T","GobangPiece"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){return function(t,e,o){this.x=t,this.y=e,this.color=o}}();o.GobangPiece=i,cc._RF.pop()},{}],GobangScene:[function(t,e,o){"use strict";cc._RF.push(e,"2fcd3v+r05H8q3UVtZU7Lkf","GobangScene"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./GobangBoard"),r=t("./GobangConstants"),c=t("./GobangAI"),s=t("../G"),n=cc._decorator,a=n.ccclass,h=n.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.ai=null,e.state=r.NONE,e}return __extends(e,t),e.prototype.start=function(){this.board.init(this),this.ai=new c.GobangAI(this.board),this.startGame()},e.prototype.startGame=function(){this.state=r.BLACK,this.board.reset(),s.G.gameRoot.showTip("你是黑棋你先走")},e.prototype.overGame=function(){this.state===r.BLACK?(cc.log("黑棋胜"),this.state=r.NONE,s.G.gameRoot.showMaskMessage("你赢了阿尔法二狗！",{label:"朕知道了",cb:function(){},target:this})):this.state===r.WHITE&&(cc.log("白旗胜"),s.G.gameRoot.showMaskMessage("你输给了阿尔法二狗！",{label:"服了",cb:function(){},target:this},{label:"不服",cb:function(){},target:this}),this.state=r.NONE)},e.prototype.onBtnReturn=function(){s.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.onBoardTouched=function(t){var e=this;switch(this.state){case r.NONE:break;case r.BLACK:if(this.board.getPieceByCoor(t).color!==r.NONE)return void s.G.gameRoot.showTip("这里有子了，你是不是傻");this.board.placeBlack(t),this.board.judgeWin()?this.overGame():(this.state=r.WHITE,this.scheduleOnce(function(){e.board.placeWhite(e.ai.getNextCoor()),e.board.judgeWin()?e.overGame():e.state=r.BLACK},1));break;case r.WHITE:}},__decorate([h(i.GobangBoard)],e.prototype,"board",void 0),e=__decorate([a],e)}(cc.Component);o.GobangScene=p,cc._RF.pop()},{"../G":"G","./GobangAI":"GobangAI","./GobangBoard":"GobangBoard","./GobangConstants":"GobangConstants"}],G:[function(t,e,o){"use strict";cc._RF.push(e,"409bcMsMydAJKg/yHU4OEJk","G"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){this.gameRoot=null}return t.prototype.enterHall=function(){cc.director.loadScene("hall")},t.prototype.returnHall=function(){cc.director.loadScene("hall")},t.prototype.enterGobang=function(){this.loadSceneWithProgress("gobang")},t.prototype.enterReversi=function(){this.loadSceneWithProgress("reversi")},t.prototype.enter2048=function(){this.loadSceneWithProgress("2048")},t.prototype.enterJump=function(){this.loadSceneWithProgress("jump")},t.prototype.enterPuzzle=function(){this.loadSceneWithProgress("puzzle")},t.prototype.enterGet47=function(){this.loadSceneWithProgress("get47")},t.prototype.setLoadingDisplay=function(){if(!cc.sys.isNative){var t=document.getElementById("splash"),e=t.querySelector(".progress-bar span");cc.loader.onProgress=function(t,o,i){var r=100*t/o;e&&(e.style.width=r.toFixed(2)+"%")},t.style.display="block",e.style.width="0%",cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){t.style.display="none"})}},t.prototype.loadSceneWithProgress=function(t,e){this.setLoadingDisplay(),cc.director.preloadScene(t,function(){setTimeout(function(){cc.director.loadScene(t,e)},1e3)})},t.Instance=new t,t}();o.G=i.Instance,cc._RF.pop()},{}],HallScene:[function(t,e,o){"use strict";cc._RF.push(e,"fd226wRnxRPpLNRLPUta677","HallScene"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../G"),r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onBtnGobang=function(){i.G.enterGobang()},e.prototype.onBtnReversi=function(){i.G.enterReversi()},e.prototype.onBtn2048=function(){i.G.enter2048()},e.prototype.onBtnJump=function(){i.G.enterJump()},e.prototype.onBtnPuzzle=function(){i.G.enterPuzzle()},e.prototype.onBtnGet47=function(){i.G.enterGet47()},e=__decorate([c],e)}(cc.Component));o.HallScene=s,cc._RF.pop()},{"../G":"G"}],JumpBlock:[function(t,e,o){"use strict";cc._RF.push(e,"2f59bXfwKJPCLY3438CoYsJ","JumpBlock"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e){this.head=t,this.length=e}return Object.defineProperty(t.prototype,"tail",{get:function(){return this.head+this.length-1},enumerable:!0,configurable:!0}),t}();o.Block=i,cc._RF.pop()},{}],JumpConstants:[function(t,e,o){"use strict";cc._RF.push(e,"011d12M67BCB6Gv7D1zh1X3","JumpConstants"),Object.defineProperty(o,"__esModule",{value:!0});!function(t){t[t.NONE=0]="NONE",t[t.READY=1]="READY",t[t.START=2]="START",t[t.OVER=3]="OVER"}(o.STATE||(o.STATE={})),cc._RF.pop()},{}],JumpPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"b6b4dcrVKZGkYFaEw6tiwLd","JumpPlayer"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.power=0,e.initSpeed=0,e.jumpDistance=0,e.speed=0,e.isReadyJump=!1,e.direction=1,e}return __extends(e,t),e.prototype.readyJump=function(){this.node.runAction(cc.scaleTo(2,1,.5)),this.speed=this.initSpeed,this.isReadyJump=!0},e.prototype.jumpTo=function(t,e,o){var i=this;this.node.stopAllActions(),this.isReadyJump=!1;var r=cc.scaleTo(1,1,1),c=cc.jumpTo(.5,t,200,1),s=cc.callFunc(function(){i.speed=0,i.jumpDistance=0,e()},o);this.node.runAction(r),this.node.runAction(cc.sequence(c,s))},e.prototype.update=function(t){this.isReadyJump&&(this.speed+=t*this.power,this.jumpDistance+=this.speed*t)},__decorate([c(cc.Integer)],e.prototype,"power",void 0),__decorate([c(cc.Float)],e.prototype,"initSpeed",void 0),e=__decorate([r],e)}(cc.Component);o.Player=s,cc._RF.pop()},{}],JumpProgress:[function(t,e,o){"use strict";cc._RF.push(e,"5ecec+6EYpOOICro+tY1/xi","JumpProgress"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.anchor=null,e.target=null,e.length=100,e}return __extends(e,t),e.prototype.init=function(t){this.length=t,this.anchor.x=0},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.updateProgress=function(t){return this.progressBar.progress=t/this.length,this.progressBar.progress>=.95?(this.anchor.x=this.node.width,!0):(this.anchor.x=this.node.getChildByName("bar").width,!1)},__decorate([c(cc.ProgressBar)],e.prototype,"progressBar",void 0),__decorate([c(cc.Node)],e.prototype,"anchor",void 0),__decorate([c(cc.Node)],e.prototype,"target",void 0),e=__decorate([r],e)}(cc.Component);o.Progress=s,cc._RF.pop()},{}],JumpScene:[function(t,e,o){"use strict";cc._RF.push(e,"7df288Am4VDaoxBjM38OlOw","JumpScene"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./JumpStage"),r=t("./JumpConstants"),c=t("./JumpProgress"),s=t("../G"),n=cc._decorator,a=n.ccclass,h=n.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stage=null,e.progress=null,e.ignoreStoryButton=null,e.state=r.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.addListeners(),this.startGame()},e.prototype.startGame=function(){var t=this;this.state=r.STATE.READY,this.stage.init(this),this.stage.showStartStory(function(){t.ignoreStoryButton.active=!1,t.progress.init(200),t.progress.show(),t.state=r.STATE.START,t.stage.startGame()},this)},e.prototype.overGame=function(t){var e=this;t?(this.progress.hide(),this.state=r.STATE.OVER,this.stage.endGame(function(){s.G.gameRoot.showMaskMessage("原来我不是男主",{label:"打扰了",cb:function(){s.G.returnHall()},target:e})},this)):(this.state=r.STATE.OVER,s.G.gameRoot.showMaskMessage("缘已至此",{label:"放不下",cb:function(){e.stage.startGame(),e.state=r.STATE.START,e.progress.updateProgress(0)},target:this},{label:"算了吧",cb:function(){s.G.returnHall()},target:this}))},e.prototype.onScreenTouchStart=function(){this.state===r.STATE.START&&this.stage.playerReadyJump()},e.prototype.onScreenTouchEnd=function(){var t=this;this.state===r.STATE.START&&this.stage.playerJump(function(e,o){-1===e?(t.state=r.STATE.NONE,t.stage.playerDie(function(){t.overGame(!1)},t)):t.progress.updateProgress(e)?t.overGame(!0):o&&t.stage.addNewBlock()},this)},e.prototype.ignoreStory=function(){this.stage.ignoreStory()},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onScreenTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onScreenTouchEnd,this)},e.prototype.removeListeners=function(){},__decorate([h(i.Stage)],e.prototype,"stage",void 0),__decorate([h(c.Progress)],e.prototype,"progress",void 0),__decorate([h(cc.Node)],e.prototype,"ignoreStoryButton",void 0),e=__decorate([a],e)}(cc.Component);o.JumpScene=p,cc._RF.pop()},{"../G":"G","./JumpConstants":"JumpConstants","./JumpProgress":"JumpProgress","./JumpStage":"JumpStage"}],JumpStage:[function(t,e,o){"use strict";cc._RF.push(e,"e3e700jxwtD1ao6LQTfMpyq","JumpStage"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./JumpBlock"),r=t("./JumpPlayer"),c=cc._decorator,s=c.ccclass,n=c.property,a=(c.executeInEditMode,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.groundLayer=null,e.gridNum=20,e.g=null,e.minBlockSpace=1,e.maxBlockSpace=10,e.minBlockLength=1,e.maxBlockLength=7,e.cameraMoveDuration=1,e.endScene=null,e.jumpScene=null,e.gridWidth=32,e.groundOrigin=cc.v2(),e.offset=0,e.currBlock=null,e.nextBlock=null,e.playerIndex=null,e.animState=null,e.isMovingStage=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this.gridWidth=Math.floor(this.groundLayer.width/this.gridNum),this.groundOrigin=this.groundLayer.position},e.prototype.init=function(t){this.jumpScene=t},e.prototype.showStartStory=function(t,e){this.g.clear(),this.drawBlock(new i.Block(0,5)),this.drawBlock(new i.Block(9,5));var o=this.getComponent(cc.Animation);o.once("finished",function(){t()},e),this.animState=o.play("start")},e.prototype.startGame=function(){this.reset()},e.prototype.endGame=function(t,e){var o=this;this.g.clear(),this.scheduleOnce(function(){o.endScene.active=!0},5),this.scheduleOnce(function(){o.player.node.getChildByName("name").getComponent(cc.Label).string=""},10),this.scheduleOnce(function(){o.player.node.children.forEach(function(t){t.color=cc.hexToColor("#58D639"),o.player.getComponent(cc.MotionStreak).color=cc.hexToColor("#58D639")})},15),this.scheduleOnce(function(){o.player.readyJump()},20),this.scheduleOnce(function(){var i=cc.v2(o.player.node.x-1e3,o.player.node.y);o.player.jumpTo(i,t,e)},25)},e.prototype.reset=function(){this.groundLayer.position=this.groundOrigin,this.g.clear(),this.currBlock=new i.Block(0,5),this.nextBlock=new i.Block(9,5),this.drawBlock(this.currBlock),this.drawBlock(this.nextBlock);var t=this.currBlock.head+Math.floor(this.currBlock.length/2);this.playerIndex=t,this.player.node.position=cc.v2(t*this.gridWidth+this.gridWidth/2,0),this.isMovingStage=!1},e.prototype.drawBlock=function(t){this.g.rect(t.head*this.gridWidth,-this.gridWidth,this.gridWidth*t.length,this.gridWidth),this.g.fill()},e.prototype.addNewBlock=function(){var t=this;this.moveStage(function(){t.currBlock=t.nextBlock;var e=Math.floor(t.minBlockSpace+Math.random()*(t.maxBlockSpace-t.minBlockSpace)),o=t.currBlock.head+t.currBlock.length+e,r=Math.floor(t.minBlockLength+Math.random()*(t.maxBlockLength-t.minBlockLength));t.nextBlock=new i.Block(o,r),t.drawBlock(t.nextBlock)},this)},e.prototype.moveStage=function(t,e){var o=this;this.isMovingStage=!0;var i=(this.nextBlock.head-this.currBlock.head)*this.gridWidth,r=cc.moveBy(this.cameraMoveDuration,-i,0),c=cc.sequence(r,cc.callFunc(function(){o.isMovingStage=!1,t()},e));this.groundLayer.runAction(c)},e.prototype.canReadyJump=function(){return!this.isMovingStage&&0===this.player.speed},e.prototype.playerReadyJump=function(){this.canReadyJump()&&this.player.readyJump()},e.prototype.ignoreStory=function(){this.animState.speed=4},e.prototype.playerDie=function(t,e){var o=cc.sequence(cc.moveBy(1,0,-1e3),cc.callFunc(t,e));this.player.node.runAction(o)},e.prototype.playerJump=function(t,e){var o=this;if(this.player.isReadyJump){var i=Math.round(this.player.jumpDistance/this.gridWidth),r=this.playerIndex+i,c=cc.v2(this.gridWidth*r+this.gridWidth/2,0);this.player.jumpTo(c,function(){o.playerIndex=r,r<=o.currBlock.tail?t(o.playerIndex,!1):r>=o.nextBlock.head&&r<=o.nextBlock.tail?t(o.playerIndex,!0):t(-1,!1)},this)}},__decorate([n(r.Player)],e.prototype,"player",void 0),__decorate([n(cc.Node)],e.prototype,"groundLayer",void 0),__decorate([n(cc.Integer)],e.prototype,"gridNum",void 0),__decorate([n(cc.Graphics)],e.prototype,"g",void 0),__decorate([n(cc.Integer)],e.prototype,"minBlockSpace",void 0),__decorate([n(cc.Integer)],e.prototype,"maxBlockSpace",void 0),__decorate([n(cc.Integer)],e.prototype,"minBlockLength",void 0),__decorate([n(cc.Integer)],e.prototype,"maxBlockLength",void 0),__decorate([n(cc.Float)],e.prototype,"cameraMoveDuration",void 0),__decorate([n(cc.Node)],e.prototype,"endScene",void 0),e=__decorate([s],e)}(cc.Component));o.Stage=a,cc._RF.pop()},{"./JumpBlock":"JumpBlock","./JumpPlayer":"JumpPlayer"}],LodingScene:[function(t,e,o){"use strict";cc._RF.push(e,"118a2LRWWBIKY9afEfjWW/h","LodingScene"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../G"),r=t("../shared/GameRoot"),c=cc._decorator,s=c.ccclass,n=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipLabel=null,e.gameRoot=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc.game.addPersistRootNode(this.gameRoot),this.initGlobal()},e.prototype.initGlobal=function(){i.G.gameRoot=this.gameRoot.getComponent(r.GameRoot)},e.prototype.start=function(){var t=this;cc.director.setDisplayStats(!1);var e="始终相信美好的事情不会发生",o=0;this.tipLabel.string="",this.schedule(function(){++o===e.length+1?t.onLoadSuccess():t.tipLabel.string=e.substring(0,o)},.3,e.length+1,.3)},e.prototype.onLoadSuccess=function(){i.G.enterHall()},__decorate([n(cc.Label)],e.prototype,"tipLabel",void 0),__decorate([n(cc.Node)],e.prototype,"gameRoot",void 0),e=__decorate([s],e)}(cc.Component);o.LodingScene=a,cc._RF.pop()},{"../G":"G","../shared/GameRoot":"GameRoot"}],M2048Board:[function(t,e,o){"use strict";cc._RF.push(e,"8daa0Je3Z9NaKuqNJt/x5E8","M2048Board"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./M2048Piece"),r=t("./M2048Constants"),c=cc._decorator,s=c.ccclass,n=c.property,a=c.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colsSum=4,e.rowsSum=4,e.graphics=null,e.piecePrefab=null,e.pieceLayer=null,e.tileWidth=0,e.startX=0,e.startY=0,e.boardWidth=0,e.boardHeight=0,e.m2048Scene=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.tileWidth=this.node.width/(this.colsSum+1),this.startX=this.tileWidth/2,this.startY=this.tileWidth/2,this.boardWidth=this.tileWidth*this.colsSum,this.boardHeight=this.tileWidth*this.rowsSum,this.graphics.clear(),this.graphics.strokeColor=cc.Color.BLACK;for(t=0;t<this.colsSum+1;t++)this.graphics.moveTo(this.startX+t*this.tileWidth,this.startY),this.graphics.lineTo(this.startX+t*this.tileWidth,this.startY+this.boardHeight),this.graphics.stroke();for(e=0;e<this.rowsSum+1;e++)this.graphics.moveTo(this.startX,this.startY+e*this.tileWidth),this.graphics.lineTo(this.startX+this.boardWidth,this.startY+e*this.tileWidth),this.graphics.stroke();this.pieceLayer.removeAllChildren(),this.pieceMap=[];for(var t=0;t<this.colsSum;t++){this.pieceMap[t]=[];for(var e=0;e<this.rowsSum;e++){var o=cc.instantiate(this.piecePrefab).getComponent(i.M2048Piece);o.node.parent=this.pieceLayer,o.node.x=this.startX+t*this.tileWidth+this.tileWidth/2,o.node.y=this.startY+e*this.tileWidth+this.tileWidth/2,this.pieceMap[t][e]=o,o.init(t,t,0)}}},e.prototype.init=function(t){this.m2048Scene=t,this.reset(),this.addListeners()},e.prototype.reset=function(){for(var t=0;t<this.colsSum;t++)for(var e=0;e<this.rowsSum;e++)this.pieceMap[t][e].n=0;for(var o=0;o<2;o++)this.newPiece()},e.prototype.newPiece=function(){for(var t=[],e=0;e<this.colsSum;e++)for(var o=0;o<this.rowsSum;o++)0===this.pieceMap[e][o].n&&t.push(this.pieceMap[e][o]);t[Math.floor(Math.random()*t.length)].randomNumber()},e.prototype.judgeOver=function(){for(var t=0;t<this.rowsSum;t++)for(var e=0;e<this.colsSum;e++){if(0===this.pieceMap[e][t].n)return!1;if(e<=this.colsSum-2&&this.pieceMap[e][t].n===this.pieceMap[e+1][t].n)return!1;if(t<=this.rowsSum-2&&this.pieceMap[e][t].n===this.pieceMap[e][t+1].n)return!1}return!0},e.prototype.getMaxNLabel=function(){for(var t=2,e="2",o=0;o<this.colsSum;o++)for(var i=0;i<this.rowsSum;i++)this.pieceMap[o][i].n>t&&(t=this.pieceMap[o][i].n,e=this.pieceMap[o][i].nLabel.string);return e},e.prototype.slideLeft=function(){for(var t=!1,e=0;e<this.rowsSum;e++)for(o=0;o<this.colsSum;o++)if(0!==this.pieceMap[o][e].n)for(i=o+1;i<this.colsSum;i++)if(0!==this.pieceMap[i][e].n){if(this.pieceMap[o][e].n===this.pieceMap[i][e].n){this.pieceMap[o][e].n*=2,this.pieceMap[i][e].n=0,t=!0;break}break}for(e=0;e<this.rowsSum;e++)for(var o=0;o<this.colsSum;o++)if(0===this.pieceMap[o][e].n)for(var i=o+1;i<this.rowsSum;i++)if(0!==this.pieceMap[i][e].n){this.pieceMap[o][e].n=this.pieceMap[i][e].n,this.pieceMap[i][e].n=0,t=!0;break}return t&&this.newPiece(),t},e.prototype.slideRight=function(){for(var t=!1,e=0;e<this.rowsSum;e++)for(o=this.colsSum-1;o>=0;o--)if(0!==this.pieceMap[o][e].n)for(i=o-1;i>=0;i--)if(0!==this.pieceMap[i][e].n){if(this.pieceMap[o][e].n===this.pieceMap[i][e].n){this.pieceMap[o][e].n=2*this.pieceMap[o][e].n,this.pieceMap[i][e].n=0,t=!0;break}break}for(e=0;e<this.rowsSum;e++)for(var o=this.colsSum-1;o>=0;o--)if(0===this.pieceMap[o][e].n)for(var i=o-1;i>=0;i--)if(0!==this.pieceMap[i][e].n){this.pieceMap[o][e].n=this.pieceMap[i][e].n,this.pieceMap[i][e].n=0,t=!0;break}return t&&this.newPiece(),t},e.prototype.slideDown=function(){for(var t=!1,e=0;e<this.colsSum;e++)for(o=0;o<this.rowsSum;o++)if(0!==this.pieceMap[e][o].n)for(i=o+1;i<4;i++)if(0!==this.pieceMap[e][i].n){if(this.pieceMap[e][o].n===this.pieceMap[e][i].n){this.pieceMap[e][o].n=2*this.pieceMap[e][o].n,this.pieceMap[e][i].n=0,t=!0;break}break}for(e=0;e<this.colsSum;e++)for(var o=0;o<this.rowsSum;o++)if(0===this.pieceMap[e][o].n)for(var i=o+1;i<this.rowsSum;i++)if(0!==this.pieceMap[e][i].n){this.pieceMap[e][o].n=this.pieceMap[e][i].n,this.pieceMap[e][i].n=0,t=!0;break}return t&&this.newPiece(),t},e.prototype.slideUp=function(){for(var t=!1,e=0;e<this.colsSum;e++)for(o=this.rowsSum-1;o>=0;o--)if(0!==this.pieceMap[e][o].n)for(i=o-1;i>=0;i--)if(0!==this.pieceMap[e][i].n){if(this.pieceMap[e][o].n===this.pieceMap[e][i].n){this.pieceMap[e][o].n=2*this.pieceMap[e][o].n,this.pieceMap[e][i].n=0,t=!0;break}break}for(e=0;e<this.colsSum;e++)for(var o=this.rowsSum-1;o>=0;o--)if(0==this.pieceMap[e][o].n)for(var i=o-1;i>=0;i--)if(0!=this.pieceMap[e][i].n){this.pieceMap[e][o].n=this.pieceMap[e][i].n,this.pieceMap[e][i].n=0,t=!0;break}return t&&this.newPiece(),t},e.prototype.onTouched=function(t){var e=t.getStartLocation(),o=t.getLocation(),i=o.x-e.x,c=o.y-e.y;Math.abs(i)>Math.abs(c)?i>40?this.m2048Scene.onBoardSlid(r.DIR.RIGHT):i<-40&&this.m2048Scene.onBoardSlid(r.DIR.LEFT):c>40?this.m2048Scene.onBoardSlid(r.DIR.UP):c<-40&&this.m2048Scene.onBoardSlid(r.DIR.DOWN)},e.prototype.onKey=function(t){switch(t.keyCode){case cc.KEY.up:case cc.KEY.w:this.m2048Scene.onBoardSlid(r.DIR.UP);break;case cc.KEY.down:case cc.KEY.s:this.m2048Scene.onBoardSlid(r.DIR.DOWN);break;case cc.KEY.left:case cc.KEY.a:this.m2048Scene.onBoardSlid(r.DIR.LEFT);break;case cc.KEY.right:case cc.KEY.d:this.m2048Scene.onBoardSlid(r.DIR.RIGHT)}},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKey,this)},e.prototype.removeListeners=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKey,this)},__decorate([n(cc.Integer)],e.prototype,"colsSum",void 0),__decorate([n(cc.Integer)],e.prototype,"rowsSum",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics",void 0),__decorate([n(cc.Prefab)],e.prototype,"piecePrefab",void 0),__decorate([n(cc.Node)],e.prototype,"pieceLayer",void 0),e=__decorate([s,a],e)}(cc.Component);o.M2048Board=h,cc._RF.pop()},{"./M2048Constants":"M2048Constants","./M2048Piece":"M2048Piece"}],M2048Constants:[function(t,e,o){"use strict";cc._RF.push(e,"ae1feSJm35PO7NFsru97cE/","M2048Constants"),Object.defineProperty(o,"__esModule",{value:!0});!function(t){t[t.LEFT=1]="LEFT",t[t.UP=2]="UP",t[t.RIGHT=3]="RIGHT",t[t.DOWN=4]="DOWN"}(o.DIR||(o.DIR={}));!function(t){t[t.NONE=0]="NONE",t[t.START=1]="START",t[t.OVER=2]="OVER"}(o.STATE||(o.STATE={})),cc._RF.pop()},{}],M2048Piece:[function(t,e,o){"use strict";cc._RF.push(e,"cb9b4J96u9N86ZDPdyznPbw","M2048Piece"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nLabel=null,e._n=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"n",{get:function(){return this._n},set:function(t){this._n=t;var e,o;switch(t){case 0:o="",e=cc.Color.BLACK;break;case 2:o="幼儿园",e=cc.hexToColor("#784212");break;case 4:o="小学生",e=cc.hexToColor("#784212");break;case 8:o="初中生",e=cc.hexToColor("#7E5109");break;case 16:o="高中生",e=cc.hexToColor("#7D6608");break;case 32:o="大学生",e=cc.hexToColor("#186A3B");break;case 64:o="研究生",e=cc.hexToColor("#145A32");break;case 128:o="硕士生",e=cc.hexToColor("#0B5345");break;case 256:o="博士生",e=cc.hexToColor("#0E6251");break;case 512:o="实习生",e=cc.hexToColor("#1B4F72");break;case 1024:o="码农",e=cc.hexToColor("#154360");break;case 2048:o="码神",e=cc.hexToColor("#4A235A");break;case 4096:o="女装大佬",e=cc.hexToColor("#512E5F");break;case 8192:o="众生平等",e=cc.hexToColor("#78281F");break;default:o="开挂吧你",e=cc.hexToColor("#641E16")}this.nLabel.string=o,this.nLabel.node.color=e},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,o){this.x=t,this.y=e,this.n=o},e.prototype.randomNumber=function(){this.n=Math.random()<.9?2:4},e.prototype.getHcolor=function(t,e){var o=e/6,i=0,r=0,c=0,s=0;return t<1*o?(i=t/o*255,r=255,c=0,s=Math.round(i)):t>=o&&t<2*o?(i=255-(t-o)/o*255,r=Math.round(i),c=0,s=255):t>=2*o&&t<3*o?(i=(t-2*o)/o*255,r=0,c=Math.round(i),s=255):t>=3*o&&t<4*o?(i=255-(t-3*o)/o*255,r=0,c=255,s=Math.round(i)):t>=4*o&&t<5*o?(i=(t-4*o)/o*255,r=Math.round(i),c=255,s=0):(i=255-(t-5*o)/o*255,r=255,c=Math.round(i),s=0),cc.color(r,c,s)},__decorate([c(cc.Label)],e.prototype,"nLabel",void 0),e=__decorate([r],e)}(cc.Component);o.M2048Piece=s,cc._RF.pop()},{}],M2048Scene:[function(t,e,o){"use strict";cc._RF.push(e,"d6ad1DvUutCO5e9tw6UJExv","M2048Scene"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./M2048Board"),r=t("../G"),c=t("./M2048Constants"),s=cc._decorator,n=s.ccclass,a=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.state=c.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.board.init(this),this.startGame()},e.prototype.startGame=function(){this.state=c.STATE.START,this.board.reset(),r.G.gameRoot.showTip("四方向手势滑动")},e.prototype.overGame=function(){var t=this.board.getMaxNLabel();r.G.gameRoot.showMaskMessage(t,{label:"OK",cb:function(){},target:this}),this.state=c.STATE.OVER},e.prototype.onBtnReturn=function(){r.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.onBoardSlid=function(t){var e=!1;switch(t){case c.DIR.LEFT:e=this.board.slideLeft();break;case c.DIR.RIGHT:e=this.board.slideRight();break;case c.DIR.UP:e=this.board.slideUp();break;case c.DIR.DOWN:e=this.board.slideDown();break;default:cc.error("方向错误")}e&&this.board.judgeOver()&&this.overGame()},__decorate([a(i.M2048Board)],e.prototype,"board",void 0),e=__decorate([n],e)}(cc.Component);o.M2048Scene=h,cc._RF.pop()},{"../G":"G","./M2048Board":"M2048Board","./M2048Constants":"M2048Constants"}],PuzzleBoard:[function(t,e,o){"use strict";cc._RF.push(e,"f9b13Qa7CZHRZEtlGELlUrB","PuzzleBoard"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./PuzzlePiece"),r=cc._decorator,c=r.ccclass,s=r.property,n=(r.executeInEditMode,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.piecePrefab=null,e.colNum=5,e.colSpace=5,e.colWidth=0,e.blankPiece=null,e.puzzleScene=null,e}return __extends(e,t),e.prototype.init=function(t){this.puzzleScene=t,this.addListeners()},e.prototype.reset=function(t){this.colNum=t,this.colWidth=(this.node.width-this.colSpace*(this.colNum+1))/this.colNum,this.node.removeAllChildren(),this.pieceMap=[];for(var e=0;e<this.colNum;e++){this.pieceMap[e]=[];for(var o=0;o<this.colNum;o++){var r=cc.instantiate(this.piecePrefab);this.node.addChild(r),r.x=e*(this.colWidth+this.colSpace)+this.colSpace,r.y=o*(this.colWidth+this.colSpace)+this.colSpace,this.pieceMap[e][o]=r.getComponent(i.Piece),this.pieceMap[e][o].init(e,o,this.colNum,this.colWidth),this.pieceMap[e][o].isBlank&&(this.blankPiece=this.pieceMap[e][o])}}this.shuffle()},e.prototype.shuffle=function(){for(var t=0;t<1e3;t++){var e=this.getNearPieces(this.blankPiece),o=Math.floor(Math.random()*e.length);this.exchangeTwoPiece(this.blankPiece,e[o])}},e.prototype.onBoadTouch=function(t){var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e),i=Math.floor((o.x-this.colSpace)/(this.colWidth+this.colSpace)),r=Math.floor((o.y-this.colSpace)/(this.colWidth+this.colSpace));this.puzzleScene.onBoardTouch(i,r)},e.prototype.movePiece=function(t,e){for(var o=this.pieceMap[t][e],i=0,r=this.getNearPieces(o);i<r.length;i++){var c=r[i];if(c.isBlank)return this.exchangeTwoPiece(o,c),!0}return!1},e.prototype.judgeWin=function(){for(var t=0;t<this.colNum;t++)for(var e=0;e<this.colNum;e++)if(!this.pieceMap[t][e].isRight)return!1;return this.blankPiece.node.active=!0,!0},e.prototype.getNearPieces=function(t){var e=[];return t.curCol>0&&e.push(this.pieceMap[t.curCol-1][t.curRow]),t.curCol<this.colNum-1&&e.push(this.pieceMap[t.curCol+1][t.curRow]),t.curRow>0&&e.push(this.pieceMap[t.curCol][t.curRow-1]),t.curRow<this.colNum-1&&e.push(this.pieceMap[t.curCol][t.curRow+1]),e},e.prototype.exchangeTwoPiece=function(t,e){this.pieceMap[e.curCol][e.curRow]=t,this.pieceMap[t.curCol][t.curRow]=e,o=[e.curCol,t.curCol],t.curCol=o[0],e.curCol=o[1],i=[e.curRow,t.curRow],t.curRow=i[0],e.curRow=i[1],r=[e.node.position,t.node.position],t.node.position=r[0],e.node.position=r[1];var o,i,r},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onBoadTouch,this)},e.prototype.removeListeners=function(){},__decorate([s(cc.Prefab)],e.prototype,"piecePrefab",void 0),__decorate([s(cc.Integer)],e.prototype,"colNum",void 0),__decorate([s(cc.Integer)],e.prototype,"colSpace",void 0),e=__decorate([c],e)}(cc.Component));o.PuzzleBoard=n,cc._RF.pop()},{"./PuzzlePiece":"PuzzlePiece"}],PuzzleConstants:[function(t,e,o){"use strict";cc._RF.push(e,"d89d7sU+zdF0KOaog5T9QzY","PuzzleConstants"),Object.defineProperty(o,"__esModule",{value:!0});!function(t){t[t.NONE=0]="NONE",t[t.READY=1]="READY",t[t.START=2]="START",t[t.OVER=3]="OVER"}(o.STATE||(o.STATE={})),cc._RF.pop()},{}],PuzzlePiece:[function(t,e,o){"use strict";cc._RF.push(e,"4b1b5qWuY9FS6vyp1qWoUJ4","PuzzlePiece"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texture=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"isRight",{get:function(){return this.curCol===this.oriCol&&this.curRow===this.oriRow},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,o,i){this.oriCol=t,this.oriRow=e,this.curCol=t,this.curRow=e;var r=this.node.addComponent(cc.Sprite);r.spriteFrame=new cc.SpriteFrame(this.texture);var c=r.spriteFrame.getRect(),s=c.width/o,n=c.height/o,a=t*s,h=(o-e-1)*n,p=cc.rect(a,h,s,n);r.spriteFrame.setRect(p),this.node.width=i,this.node.height=i,this.isBlank=this.oriCol===o-1&&0===this.oriRow,this.isBlank&&(this.node.active=!1)},__decorate([c(cc.Texture2D)],e.prototype,"texture",void 0),e=__decorate([r],e)}(cc.Component);o.Piece=s,cc._RF.pop()},{}],PuzzleScene:[function(t,e,o){"use strict";cc._RF.push(e,"c06b53OK21HfoqRmsnlNUNX","PuzzleScene"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./PuzzleConstants"),r=t("./PuzzleBoard"),c=t("../G"),s=t("./PuzzleTimer"),n=cc._decorator,a=n.ccclass,h=n.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.timer=null,e.winPanel=null,e.level=3,e.state=i.STATE.NONE,e}return __extends(e,t),e.prototype.start=function(){this.addListeners(),this.board.init(this),this.startGame()},e.prototype.startGame=function(){this.winPanel.active=!1,this.state=i.STATE.START,this.board.reset(this.level),this.timer.reset(),this.timer.run()},e.prototype.overGame=function(){this.winPanel.active=!0,this.state=i.STATE.OVER,this.timer.stop(),c.G.gameRoot.showMaskMessage("你坚持了"+this.timer.time.toFixed(1)+"秒",{label:"呵呵"})},e.prototype.onBoardTouch=function(t,e){(this.state=i.STATE.START)&&(this.board.movePiece(t,e)?this.board.judgeWin()&&this.overGame():c.G.gameRoot.showTip("不符合规则"))},e.prototype.onBtnLevelEasy=function(){this.level=3,this.startGame()},e.prototype.onBtnLevelNormal=function(){this.level=5,this.startGame()},e.prototype.onBtnLevelHard=function(){this.level=10,this.startGame()},e.prototype.onBtnReturn=function(){c.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.addListeners=function(){},e.prototype.removeListeners=function(){},__decorate([h(r.PuzzleBoard)],e.prototype,"board",void 0),__decorate([h(s.Timer)],e.prototype,"timer",void 0),__decorate([h(cc.Node)],e.prototype,"winPanel",void 0),e=__decorate([a],e)}(cc.Component);o.PuzzleScene=p,cc._RF.pop()},{"../G":"G","./PuzzleBoard":"PuzzleBoard","./PuzzleConstants":"PuzzleConstants","./PuzzleTimer":"PuzzleTimer"}],PuzzleTimer:[function(t,e,o){"use strict";cc._RF.push(e,"0e5087jnptHobsyq50wncmT","PuzzleTimer"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timerLabel=null,e.isRunning=!1,e.time=null,e}return __extends(e,t),e.prototype.run=function(){this.time=0,this.schedule(this.tick,.1)},e.prototype.tick=function(){this.time+=.1,this.timerLabel.string=this.time.toFixed(1)+" s"},e.prototype.stop=function(){this.unschedule(this.tick)},e.prototype.reset=function(){this.time=0,this.timerLabel.string="0.0 s"},__decorate([c(cc.Label)],e.prototype,"timerLabel",void 0),e=__decorate([r],e)}(cc.Component);o.Timer=s,cc._RF.pop()},{}],ReversiAI:[function(t,e,o){"use strict";cc._RF.push(e,"f554edBfB9EGb5YaGb6mEq/","ReversiAI"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./ReversiConstants"),r=function(){function t(t){this.board=t}return t.prototype.getNextCoor=function(){for(var t=[],e=0;e<this.board.pieceMap.length;e++)for(var o=0;o<this.board.pieceMap[e].length;o++)if(this.board.pieceMap[e][o].color===i.NONE&&this.board.canPlace(i.WHITE,cc.v2(e,o))){if(0===e||0===o||e===this.board.pieceMap.length-1||o===this.board.pieceMap[e].length-1)return cc.v2(e,o);t.push(cc.v2(e,o))}return t[Math.floor(Math.random()*t.length)]},t}();o.ReversiAI=r,cc._RF.pop()},{"./ReversiConstants":"ReversiConstants"}],ReversiBoard:[function(t,e,o){"use strict";cc._RF.push(e,"80923WSrblNDr5l6s/fRBrL","ReversiBoard"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./ReversiPiece"),r=t("./ReversiConstants"),c=cc._decorator,s=c.ccclass,n=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colsSum=8,e.rowsSum=8,e.graphics=null,e.graphics2=null,e.tileWidth=0,e.startX=0,e.startY=0,e.boardWidth=0,e.boardHeight=0,e.lastPiece=null,e.reversiScene=null,e}return __extends(e,t),e.prototype.init=function(t){this.reversiScene=t,this.tileWidth=this.node.width/(this.colsSum+1),this.startX=this.tileWidth/2,this.startY=this.tileWidth/2,this.boardWidth=this.tileWidth*this.colsSum,this.boardHeight=this.tileWidth*this.rowsSum,this.reset(),this.addListeners()},e.prototype.reset=function(){this.graphics.clear(),this.graphics2.clear(),this.graphics.strokeColor=cc.Color.BLACK;for(t=0;t<this.colsSum+1;t++)this.graphics.moveTo(this.startX+t*this.tileWidth,this.startY),this.graphics.lineTo(this.startX+t*this.tileWidth,this.startY+this.boardHeight),this.graphics.stroke();for(e=0;e<this.rowsSum+1;e++)this.graphics.moveTo(this.startX,this.startY+e*this.tileWidth),this.graphics.lineTo(this.startX+this.boardWidth,this.startY+e*this.tileWidth),this.graphics.stroke();this.pieceMap=[];for(var t=0;t<this.colsSum;t++){this.pieceMap[t]=[];for(var e=0;e<this.rowsSum;e++)this.pieceMap[t][e]=new i.ReversiPiece(t,e,r.NONE)}this.placeBlack(cc.v2(Math.floor(this.colsSum/2)-1,Math.floor(this.rowsSum/2)-1)),this.placeBlack(cc.v2(Math.floor(this.colsSum/2),Math.floor(this.rowsSum/2))),this.placeWhite(cc.v2(cc.v2(Math.floor(this.colsSum/2)-1,Math.floor(this.rowsSum/2)))),this.placeWhite(cc.v2(cc.v2(Math.floor(this.colsSum/2),Math.floor(this.rowsSum/2)-1)))},e.prototype.refresh=function(){this.graphics2.clear();for(var t=0;t<this.colsSum;t++)for(var e=0;e<this.rowsSum;e++)this.pieceMap[t][e].color===r.BLACK?(this.graphics2.strokeColor=cc.Color.BLACK,this.graphics2.fillColor=cc.Color.BLACK,this.graphics2.circle(this.startX+t*this.tileWidth+this.tileWidth/2,this.startY+e*this.tileWidth+this.tileWidth/2,.45*this.tileWidth),this.graphics2.fill()):this.pieceMap[t][e].color===r.WHITE&&(this.graphics2.strokeColor=cc.Color.WHITE,this.graphics2.fillColor=cc.Color.WHITE,this.graphics2.circle(this.startX+t*this.tileWidth+this.tileWidth/2,this.startY+e*this.tileWidth+this.tileWidth/2,.45*this.tileWidth),this.graphics2.fill())},e.prototype.placeBlack=function(t){this.pieceMap[t.x][t.y]=new i.ReversiPiece(t.x,t.y,r.BLACK),this.lastPiece=this.pieceMap[t.x][t.y],this.refresh()},e.prototype.placeWhite=function(t){this.pieceMap[t.x][t.y]=new i.ReversiPiece(t.x,t.y,r.WHITE),this.lastPiece=this.pieceMap[t.x][t.y],this.refresh()},e.prototype.getPieceByCoor=function(t){return this.pieceMap[t.x][t.y]},e.prototype.onTouched=function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());if(!(e.x<this.startX||e.y<this.startY||e.x>this.startX+this.boardWidth||e.y>this.startY+this.boardHeight)){var o=this.getCoorByPos(e);this.reversiScene.onBoardTouched(o)}},e.prototype.getCoorByPos=function(t){var e=Math.round((t.x-this.startX-this.tileWidth/2)/this.tileWidth),o=Math.round((t.y-this.startY-this.tileWidth/2)/this.tileWidth);return cc.v2(e,o)},e.prototype.nearPiece=function(t,e){switch(e){case 1:if(0!==t.x)return this.pieceMap[t.x-1][t.y];break;case 2:if(0!==t.x&&t.y!==this.rowsSum-1)return this.pieceMap[t.x-1][t.y+1];break;case 3:if(t.y!==this.rowsSum-1)return this.pieceMap[t.x][t.y+1];break;case 4:if(t.x!==this.colsSum-1&&t.y!==this.rowsSum-1)return this.pieceMap[t.x+1][t.y+1];break;case 5:if(t.x!==this.colsSum-1)return this.pieceMap[t.x+1][t.y];break;case 6:if(t.x!==this.colsSum-1&&0!==t.y)return this.pieceMap[t.x+1][t.y-1];break;case 7:if(0!==t.y)return this.pieceMap[t.x][t.y-1];break;case 8:if(0!==t.x&&0!==t.y)return this.pieceMap[t.x-1][t.y-1]}return null},e.prototype.judgePass=function(t,e,o){var i=e;if(null===(i=this.nearPiece(e,o)))return!1;for(;i.color===-t;){if(null===(i=this.nearPiece(i,o)))return!1;if(i.color===t)return!0}return!1},e.prototype.changePass=function(t,e){for(var o=this.nearPiece(t,e);o.color===-this.reversiScene.state;)o.color=t.color,o=this.nearPiece(o,e);this.refresh()},e.prototype.canPlace=function(t,e){for(var o=1;o<=8;o++){if(this.judgePass(t,this.getPieceByCoor(e),o))return!0;if(8===o)return!1}},e.prototype.judgeMoveable=function(t){for(var e=null,o=0;o<this.colsSum;o++)for(var i=0;i<this.rowsSum;i++)if((e=this.pieceMap[o][i]).color===r.NONE)for(var c=1;c<=8;c++)if(this.judgePass(t,e,c))return!0;return!1},e.prototype.judgeWin=function(){var t=this.judgeMoveable(this.lastPiece.color),e=this.judgeMoveable(-this.lastPiece.color);return!t&&!e},e.prototype.getPieceCount=function(){for(var t=0,e=0,o=0;o<this.pieceMap.length;o++)for(var i=0;i<this.pieceMap[o].length;i++)this.pieceMap[o][i].color===r.BLACK?t++:this.pieceMap[o][i].color===r.WHITE&&e++;return{blackPieceSum:t,whitePieceSum:e}},e.prototype.addListeners=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},e.prototype.removeListeners=function(){},__decorate([n(cc.Integer)],e.prototype,"colsSum",void 0),__decorate([n(cc.Integer)],e.prototype,"rowsSum",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics",void 0),__decorate([n(cc.Graphics)],e.prototype,"graphics2",void 0),e=__decorate([s],e)}(cc.Component);o.ReversiBoard=a,cc._RF.pop()},{"./ReversiConstants":"ReversiConstants","./ReversiPiece":"ReversiPiece"}],ReversiConstants:[function(t,e,o){"use strict";cc._RF.push(e,"42661F1JzZNuZUWFOTg6E1t","ReversiConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.NONE=0,o.BLACK=1,o.WHITE=-1,cc._RF.pop()},{}],ReversiPiece:[function(t,e,o){"use strict";cc._RF.push(e,"bdfa7e/LeBNGpN93hwoveof","ReversiPiece"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){return function(t,e,o){this.x=t,this.y=e,this.color=o}}();o.ReversiPiece=i,cc._RF.pop()},{}],ReversiScene:[function(t,e,o){"use strict";cc._RF.push(e,"05ff4fnZAdCwZScbk1f0GpO","ReversiScene"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./ReversiBoard"),r=t("./ReversiAI"),c=t("./ReversiConstants"),s=t("../G"),n=cc._decorator,a=n.ccclass,h=n.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.board=null,e.blackScoreLabel=null,e.whiteScoreLabel=null,e.ai=null,e.state=c.NONE,e}return __extends(e,t),e.prototype.start=function(){this.board.init(this),this.ai=new r.ReversiAI(this.board),this.startGame()},e.prototype.startGame=function(){this.state=c.BLACK,this.board.reset(),this.blackScoreLabel.string="2",this.whiteScoreLabel.string="2",s.G.gameRoot.showTip("你是黑棋你先走")},e.prototype.overGame=function(){var t=this.board.getPieceCount(),e=t.blackPieceSum,o=t.whitePieceSum;e>o?(cc.log("白棋胜"),s.G.gameRoot.showMaskMessage("你赢了阿尔法二狗！",{label:"朕知道了",cb:function(){},target:this})):e<o?(cc.log("黑棋胜"),s.G.gameRoot.showMaskMessage("你输给了阿尔法二狗！",{label:"服了",cb:function(){},target:this},{label:"不服",cb:function(){},target:this})):(cc.log("平局"),s.G.gameRoot.showMaskMessage("你和阿尔法二狗五五开!",{label:"朕知道了",cb:function(){},target:this})),this.state=c.NONE},e.prototype.updateScore=function(){var t=this.board.getPieceCount(),e=t.blackPieceSum,o=t.whitePieceSum;this.blackScoreLabel.string=e+"",this.whiteScoreLabel.string=o+""},e.prototype.onBtnReturn=function(){s.G.returnHall()},e.prototype.onBtnRestart=function(){this.startGame()},e.prototype.runAi=function(){var t=this;this.scheduleOnce(function(){var e=t.ai.getNextCoor();t.board.placeWhite(e);for(var o=t.board.getPieceByCoor(e),i=1;i<=8;i++)t.board.judgePass(c.WHITE,o,i)&&t.board.changePass(o,i);t.updateScore(),t.board.judgeWin()?t.overGame():t.board.judgeMoveable(c.BLACK)?t.state=c.BLACK:(s.G.gameRoot.showTip("黑棋无地可下，白棋继续"),t.runAi())},1)},e.prototype.onBoardTouched=function(t){switch(this.state){case c.NONE:break;case c.BLACK:var e=this.board.getPieceByCoor(t);if(e.color!==c.NONE)return void s.G.gameRoot.showTip("这里有子了，你是不是傻");if(!this.board.canPlace(this.state,t))return void s.G.gameRoot.showTip("不符合规则");this.board.placeBlack(t),e=this.board.getPieceByCoor(t);for(var o=1;o<=8;o++)this.board.judgePass(c.BLACK,e,o)&&this.board.changePass(e,o);this.updateScore(),this.board.judgeWin()?this.overGame():this.board.judgeMoveable(c.WHITE)?(this.state=c.WHITE,this.runAi()):s.G.gameRoot.showTip("白棋无地可下，黑棋继续");break;case c.WHITE:}},__decorate([h(i.ReversiBoard)],e.prototype,"board",void 0),__decorate([h(cc.Label)],e.prototype,"blackScoreLabel",void 0),__decorate([h(cc.Label)],e.prototype,"whiteScoreLabel",void 0),e=__decorate([a],e)}(cc.Component);o.ReversiScene=p,cc._RF.pop()},{"../G":"G","./ReversiAI":"ReversiAI","./ReversiBoard":"ReversiBoard","./ReversiConstants":"ReversiConstants"}],Streak:[function(t,e,o){"use strict";cc._RF.push(e,"7d2a9UGfIdOHJj/cCvXlEIj","Streak"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.g=null,e}return __extends(e,t),e.prototype.start=function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){var e=this.node.parent.convertToNodeSpaceAR(t.getLocation());this.g.circle(e.x,e.y,5),this.g.fill(),this.g.moveTo(e.x,e.y)},e.prototype.onTouchMove=function(t){var e=this.node.parent.convertToNodeSpaceAR(t.getLocation());this.g.lineTo(e.x,e.y),this.g.stroke(),this.g.moveTo(e.x,e.y)},e.prototype.onTouchEnd=function(t){var e=this.node.parent.convertToNodeSpaceAR(t.getLocation());this.g.circle(e.x,e.y,5),this.g.fill(),this.g.clear()},__decorate([c(cc.Graphics)],e.prototype,"g",void 0),e=__decorate([r],e)}(cc.Component);o.Streak=s,cc._RF.pop()},{}]},{},["M2048Board","M2048Constants","M2048Piece","M2048Scene","G","Get47Board","Get47Constants","Get47Piece","Get47Scene","Get47Score","GobangAI","GobangBoard","GobangConstants","GobangPiece","GobangScene","HallScene","JumpBlock","JumpConstants","JumpPlayer","JumpProgress","JumpScene","JumpStage","LodingScene","PuzzleBoard","PuzzleConstants","PuzzlePiece","PuzzleScene","PuzzleTimer","ReversiAI","ReversiBoard","ReversiConstants","ReversiPiece","ReversiScene","GameRoot","Streak"]);